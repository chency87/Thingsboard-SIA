(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74cde5bd"],{"2b09":function(t,e,n){"use strict";var a=n("3077"),o=n.n(a);o.a},3077:function(t,e,n){},"313e":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("el-row",{staticClass:"top-content",attrs:{gutter:20}},[n("el-col",{attrs:{span:6,offset:18}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-upload"},on:{click:function(e){return t.handleTransport()}}},[t._v(" 上传")]),t._v(" "),n("el-button",{attrs:{type:"info",icon:"el-icon-search"},on:{click:function(e){return t.handleStopTransport()}}},[t._v(" 停止")])],1)],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.tableRowClassName},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{prop:"key",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:"true"===e.row.status?"primary":"success","disable-transitions":""}},[t._v(t._s(e.row.status))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"id",label:"设备ID",width:"300"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"设备名称",width:"205"}}),t._v(" "),n("el-table-column",{attrs:{prop:"key",label:"设备字段",width:"155"}}),t._v(" "),n("el-table-column",{attrs:{prop:"LastValue",label:"最新测量值",width:"155"}}),t._v(" "),n("el-table-column",{attrs:{prop:"scope",label:"转发范围"}})],1),t._v(" "),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total}})],1)],1)},o=[],r=(n("ac6a"),n("b775"));function i(t){return Object(r["a"])({url:"/api/plugin/data/all",method:"get",params:t})}function l(t){return Object(r["a"])({url:"/api/plugin/data/transport/exec",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/api/plugin/data/transport/stop",method:"post",data:t})}function c(t){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){if(t===e)return!0;if(!(t instanceof Object)||!(e instanceof Object))return!1;if(t.constructor!==e.constructor)return!1;for(var n in t)if(t.hasOwnProperty(n)){if(!e.hasOwnProperty(n))return!1;if(t[n]===e[n])continue;if("object"!==c(t[n]))return!1;if(!Object.equals(t[n],e[n]))return!1}for(n in e)if(e.hasOwnProperty(n)&&!t.hasOwnProperty(n))return!1;return!0}var p={name:"DataManage",created:function(){var t=this,e={limit:"10",idOffset:""};i(e).then((function(e){t.tableData=e}))},methods:{tableRowClassName:function(t){t.row;var e=t.rowIndex;return 1===e?"warning-row":3===e?"success-row":""},handleSelectionChange:function(t){this.multipleSelection=t,window.console.log(this.multipleSelection)},handleStopTransport:function(){for(var t=this,e=[],n=0;n<this.multipleSelection.length;n++){var a=[],o={entityType:"DEVICE"};o["id"]=this.multipleSelection[n].id;for(var r=!1,l=0;l<e.length;l++)if(u(e[l]["id"],o)){a=e[l]["keys"],r=!0;break}var c={};if(c["key"]=this.multipleSelection[n].key,c["scope"]=this.multipleSelection[n].scope,a.push(c),!r){var p={};p["id"]=o,p["keys"]=a,e.push(p)}}s(e).then((function(e){var n={limit:"10",idOffset:""};i(n).then((function(e){t.tableData=e})),t.$message({message:"Stop Transportation Successed",type:"success"})}))},handleTransport:function(){for(var t=this,e={cron:"0/1 * * * * ?"},n=[],a=0;a<this.multipleSelection.length;a++){var o=[],r={entityType:"DEVICE"};r["id"]=this.multipleSelection[a].id;for(var s=!1,c=0;c<n.length;c++)if(u(n[c]["id"],r)){o=n[c]["keys"],s=!0;break}var p={};if(p["key"]=this.multipleSelection[a].key,p["scope"]=this.multipleSelection[a].scope,o.push(p),!s){var f={};f["id"]=r,f["keys"]=o,n.push(f)}}e["param"]=n,l(e).then((function(e){var n={limit:"10",idOffset:""};i(n).then((function(e){t.tableData=e})),t.$message({message:"Start Transportation Successed",type:"success"})}))}},data:function(){return{total:1,idOffset:0,tableData:[{id:"-bb6a-11ea-8cc4-73c0690c1ed2",name:"",key:"",LastValue:"",scope:""}],multipleSelection:[]}}},f=p,d=(n("2b09"),n("2877")),h=Object(d["a"])(f,a,o,!1,null,"e4864b2a",null);e["default"]=h.exports}}]);